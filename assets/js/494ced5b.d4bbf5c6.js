"use strict";(self.webpackChunkbunker=self.webpackChunkbunker||[]).push([[7875],{112:(e,r,t)=>{t.d(r,{N:()=>n});const a="https://woqkezopnodqylfjhagq.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvcWtlem9wbm9kcXlsZmpoYWdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyMjE1OTksImV4cCI6MjA1OTc5NzU5OX0.2k_UQ3iL7794EtqMCfA0NGjjdu8yQn4xQPtnoQFK-Pg";const n=(0,t(6017).UU)(a,s)},3198:(e,r,t)=>{t.d(r,{C1:()=>a,mL:()=>s});const a="/buds_bunker",s=`http://localhost:3000${a}`},4610:(e,r,t)=>{t.d(r,{CE:()=>s,gi:()=>n,t9:()=>i});var a=t(112);async function s(){const{data:e,error:r}=await a.N.from("characters").select().maybeSingle();if(r)throw console.error("[character] Fetch error:",r.message),r;if(e)return e;const{data:t,error:s}=await a.N.from("characters").insert({display_name:"New Adventurer",stats:{level:1,health:100,stamina:50,keywords:[]}}).select().single();if(s)throw console.error("[character] Insert error:",s.message),s;return t}async function n(){const{data:e,error:r}=await a.N.from("characters").select().maybeSingle();if(r)throw console.error("[character] Get error:",r.message),r;return e}async function i(e){const{data:r,error:t}=await a.N.from("characters").update(e).select().single();if(t)throw t;return r}},8683:(e,r,t)=>{t.r(r),t.d(r,{default:()=>d});var a=t(6540),s=t(1410),n=t(6347),i=t(112),o=t(3198);var c=t(4610),l=t(4848);function u(){const e=(0,n.W6)(),[r,t]=(0,a.useState)(""),[s,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(null),[m,g]=(0,a.useState)("");return(0,l.jsxs)("div",{style:{padding:"1rem",border:"1px solid #ccc",borderRadius:"6px"},children:[(0,l.jsx)("h2",{children:"\ud83d\udd11 Sign Up / Sign In"}),!d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:e=>t(e.target.value),style:{display:"block",marginBottom:"0.5rem"}}),(0,l.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>u(e.target.value),style:{display:"block",marginBottom:"0.5rem"}}),(0,l.jsx)("button",{onClick:async()=>{try{await async function(e,r){const{data:t,error:a}=await i.N.auth.signUp({email:e,password:r,options:{emailRedirectTo:`${o.mL}/email-confirm`}});if(a)throw a;return t}(r,s),g("\u2705 Sign-up successful! Please check your email to confirm.")}catch(e){console.error(e),g(`\u274c Sign-up failed: ${e.message}`)}},children:"Create Account"}),(0,l.jsx)("button",{onClick:async()=>{try{const{user:a}=await async function(e,r){const{data:t,error:a}=await i.N.auth.signInWithPassword({email:e,password:r});if(a)throw a;return t}(r,s);if(!a||!a.id)throw new Error("Missing or invalid user from Supabase");h(a),g("\ud83d\udd04 Signed in! Checking for character...");try{await(0,c.CE)(),g("\u2705 Character ready! Redirecting..."),setTimeout((()=>e.push(`${o.C1}/profile`)),2e3)}catch(t){console.error(t),g("\u274c Character creation failed. Please try again or contact support.")}}catch(a){console.error(a),g(`\u274c Sign-in failed: ${a.message}`)}},style:{marginLeft:"0.5rem"},children:"Sign In"})]}),d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:["\ud83d\udc64 Logged in as: ",d.email]}),(0,l.jsx)("button",{onClick:async()=>{try{await async function(){const{error:e}=await i.N.auth.signOut();if(e)throw e}(),h(null),g("\ud83d\udc4b Signed out.")}catch(e){console.error(e),g(`\u274c Sign-out failed: ${e.message}`)}},children:"Sign Out"})]}),m&&(0,l.jsx)("p",{style:{marginTop:"1rem"},children:m})]})}function d(){return(0,l.jsx)(s.A,{title:"Auth Test",children:(0,l.jsxs)("main",{style:{padding:"2rem"},children:[(0,l.jsx)("h1",{children:"\ud83d\udd10 Auth Test Page"}),(0,l.jsx)("p",{children:"This is a test page for signing up and managing user sessions."}),(0,l.jsx)("div",{style:{marginTop:"2rem"},children:(0,l.jsx)(u,{})})]})})}}}]);